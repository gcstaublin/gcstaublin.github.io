---
const { caption, imageSrc, imageAlt = "", cssClass } = Astro.props;
import { Image } from "astro:assets";
import TextBlockGraph from "./TextBlockGraph.astro";
---

{/* ================================== */}
{/* HTML Structure                     */}
{/* ================================== */}
<div class={`${"imageBlock__container"} ${cssClass ? cssClass : ""}`}>
  <Image src={imageSrc} alt={imageAlt} />
  {caption && <TextBlockGraph text={caption} />}
</div>

<!-- class:list={["color-text--default", "textBlock__graph"]} -->
<!-- <p class={`${"default-class"} ${className ? className : ""}`}>{text}</p> -->

{/* ================================== */}
{/* Style                              */}
{/* ================================== */}
<style>
  :root {
    --imageBlock-radius: 8px;
    --imageBlock-radius-start: 8px;
    --imageBlock-radius-end: 8px;
    /* #0000000d */
    --shadow-color: hsla(0, 0%, 0%, 0.025);
    --border-color: hsla(0, 0%, 0%, 0.07);
  }

  .imageBlock__container {
    margin-inline: auto;
    img {
      border-radius: var(--imageBlock-radius);
      border-top-left-radius: var(--imageBlock-radius-start);
      border-top-right-radius: var(--imageBlock-radius-start);
      border-bottom-right-radius: var(--imageBlock-radius-end);
      border-bottom-left-radius: var(--imageBlock-radius-end);
      border: 1px solid var(--border-color);
      box-shadow:
        0 0.7961918735236395px 2.3885756205709185px -0.625px var(--shadow-color),
        0 2.414506143104518px 7.2435184293135535px -1.25px var(--shadow-color),
        0 6.382653521484461px 19.147960564453385px -1.875px var(--shadow-color),
        0 20px 60px -2.5px var(--shadow-color);
    }
    p.textBlock__graph {
      margin-block-start: 8px;
      padding-inline-start: 8px;
      color: rgba(var(--color-fg-formula), var(--color-alpha-dim));
      font-size: var(--font-size-sm);
      line-height: 1.425;
    }
  }

  .imageBlock__container--image-bottom {
    padding-bottom: 0;
    overflow: hidden;

    > img {
      position: relative;
      bottom: -6px;
      border-radius: var(--imageBlock-radius) var(--imageBlock-radius) 0 0;
    }
  }
</style>
